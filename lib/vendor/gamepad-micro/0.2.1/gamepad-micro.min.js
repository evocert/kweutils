(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.GamepadMicro = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var GamepadMicro;!function(){var e,t,a,i,n,s,d,o,p,r,m,c,u,h,l,g,_,f,v,G="gamepadconnected",P="gamepaddisconnected",b="standard",k="GamepageMicro: ",y=navigator,w=window,T=!1,x=!0,B=console.warn;GamepadMicro=function(){v=this,v.buttonKeys=["actionSouth","actionEast","actionWest","actionNorth","leftBumper","rightBumper","leftTrigger","rightTrigger","select","start","leftStick","rightStick","dPadUp","dPadDown","dPadLeft","dPadRight","extra"],v._ticking=T,v._prevTimestamps=[],v._listening=T,v._updateCallback=function(){},v._prevRawGPTypes=[],v.gamepadConnected=t.length>0,v.gamepadSupported=!!i(),v.gamepads=[],v._heldButtonDelay=200,v._heldTimeByGP={},v._prevPressedByGP={}},e=function(){return{leftStick:{x:0,y:0},rightStick:{x:0,y:0},dPad:{x:0,y:0},buttons:{},_pressed:{},timestamp:0}},i=function(){return y.getGamepads||!!y.webkitGetGamepads||!!y.webkitGamepads},t=function(){var e=y.getGamepads&&y.getGamepads()||y.webkitGetGamepads&&y.webkitGetGamepads(),t=[];if(e)for(var a=0,i=e.length;a<i;a++){var n=e[a];n&&n.mapping===b&&t.push(n)}return t},a=function(e,t){if(!e||!e.buttons||t>=e.buttons.length)return T;var a,i=e.buttons[t];return i?(a=i,"object"==typeof i&&(a=i.value),1===a):T},n=w.requestAnimationFrame||w.webkitRequestAnimationFrame||w.mozRequestAnimationFrame||w.oRequestAnimationFrame||w.msRequestAnimationFrame,s=function(){this._updateCallback(this.gamepads)},d=function(){this._listening||(w.addEventListener(G,p,T),w.addEventListener(P,r,T),this._listening=x)},o=function(){this._listening&&(w.removeEventListener(G,p),w.removeEventListener(P,r),this._listening=T)},p=function(t){var a=t.gamepad;a.mapping===b&&(this.gamepads[a.index]=e(),this.gamepadConnected=x,this._update())},r=function(e){var t=e.gamepad,a=this.gamepads;a.forEach(function(e,i){i===t.index&&a.splice(i,1)}),a.length||(this.gamepadConnected=T),this._update()},m=function(){for(var e=t(),a=T,i={},n=0,s=0;s<e.length;s++){var d,o,p=e[s];p.timestamp&&(n=p.index,d=this._heldTimeByGP[n]||{},o=0===Object.keys(d).length,p.timestamp===this._prevTimestamps[n]&&o||(this._prevTimestamps[n]=p.timestamp,i[n]=p,a=x))}return a?i:T},c=function(){v=this;var t=v._checkForGamepadChange();if(t){v.gamepadConnected=x,v.gamepadSupported=x;var i=v.gamepads,n=v.buttonKeys;Object.keys(t).map(function(s){var d=t[s];if(d){typeof d!=v._prevRawGPTypes[s]&&(v._prevRawGPTypes[s]=typeof r);for(var o,p={},r=i[s]||e(),m=v._heldTimeByGP[s]||{},c=v._prevPressedByGP[s]||[],u=[],h=function(){m[f]={gamepadTimestamp:"number"==typeof y&&isFinite(y)?y:T,browserTimestamp:k},p[f]={pressed:x},u.push(f)},l=0,g=n.length;l<g;l++){var _,f=n[l],G=m[f],P=c.indexOf(f)>-1,b=a(d,l),k=Date.now(),y=d.timestamp,w=G&&G.gamepadTimestamp;P?b?G?(_=w&&w===d.timestamp,_&&k>G.browserTimestamp+v._heldButtonDelay||w&&d.timestamp>w+v._heldButtonDelay?(p[f]={held:x,pressed:T},u.push(f)):h()):h():(p[f]={released:x,held:T,pressed:T},m&&delete m[f]):b&&h()}r.timestamp=d.timestamp,r.buttons=p,o=d.axes,r.leftStick.x=o[0],r.leftStick.y=o[1],r.rightStick.x=o[2],r.rightStick.y=o[3],r.dPad.x=(p.dPadLeft?-1:0)+(p.dPadRight?1:0),r.dPad.y=(p.dPadUp?-1:0)+(p.dPadDown?1:0),v.gamepads[s]=r,v._heldTimeByGP[s]=m,v._prevPressedByGP[s]=u}}),v._update()}},u=function(){this._ticking||(this._ticking=x,this._tick())},h=function(){this._ticking=T},l=function(){this._poll(),this._ticking&&(n?n(this._tick.bind(this)):B(k+"This browser doesn't support requestAnimationFrame. Probably means that Gamepad API isn't supported either."))},g=function(e){return i?(this._updateCallback=e,this._addEvents(),void this._setupPoll()):void B(k+"This browser doesn't support Gamepad API, so onUpdate shouldn't be called.")},_=function(){return i?(this._updateCallback=T,this._removeEvents(),void this._removePoll()):void B(k+"This browser doesn't support Gamepad API, so offUpdate shouldn't be called.")},f=GamepadMicro.prototype,f._update=s,f._addEvents=d,f._removeEvents=o,f._onGamepadConnected=p,f._onGamepadDisconnected=r,f._checkForGamepadChange=m,f._poll=c,f._setupPoll=u,f._removePoll=h,f._tick=l,f.onUpdate=g,f.offUpdate=_}(),module.exports=GamepadMicro;
},{}]},{},[1])(1)
});